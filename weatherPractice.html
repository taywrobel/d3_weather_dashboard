<html>
    <head>
    <!-- Include all scripts and references here -->
    <script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="main.js"></script>
    <link type="text/css" rel="stylesheet" href="style.css">
    <!-- Include all scripts and references here -->
    </head>
	
    <body style="background:#CCC">
    <div id="info" class="infobox" style="display:none">
        <p>Here is where we will say something.</p>
    </div>
    <div id="loading-image">
        <img src="ajax-loader.gif">
    </div>

    <div id="search">
      City: <input type="text" value="India/Kolkata" id="city" />
      <button onClick="main()">Try it</button>
      <p>We suggest: India/Kolkata or CA/San_Francisco</p>
    </div>
    <div id="graph" class="center">

      <!-- Location for graphs to go -->
    </div>

    <!-- Reference to custom code-->
    <script>
      //var city_temp = "India/Kolkata";
      //var city_tide = "CA/San_Francisco";

      //Call main on page load
      $(document).ready(function() {
          $('#loading-image').hide();
          main();
      });

      //This is vulnerable to injection attacks
      function main(){
          $('svg').remove();
          city = document.getElementById('city').value;
          if(city === ""){
              city = "CA/San_Francisco";
          }
          var curr_width = document.body.clientWidth-20;
          var url_temp = "http://api.wunderground.com/api/9da96fc7939df769/conditions/tide/hourly10day/q/"+ city + ".json";
          var url_tide = "http://api.wunderground.com/api/9da96fc7939df769/conditions/tide/hourly10day/q/"+ city + ".json";

          showTideData(curr_width, curr_width/8, url_tide);
          showTempData(curr_width, curr_width/4, url_temp);
      }
    </script>
    </body>
</html>
